<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    centows7搭建ELK |
    
    Hexo</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/technology.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <section class="outer">
  <article id="post-centows7---ELK" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      centows7搭建ELK
    </h1>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/21/centows7---ELK/" class="article-date">
  <time datetime="2019-06-21T07:05:18.000Z" itemprop="datePublished">2019-06-21</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/搭建服务/">搭建服务</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <hr>
<h1 id="centows7搭建ELK"><a href="#centows7搭建ELK" class="headerlink" title="centows7搭建ELK"></a>centows7搭建ELK</h1><p>1.ELK是三款开源软件的缩写，即：ElasticSearch + Logstash + Kibana，这三个工具组合形成了一套实用、易用的监控架构，可抓取系统日志、apache日志、nginx日志、mysql日志等多种日志类型<br>安装java环境<br>yum -y install java<br>查看是否安装成功    java -version<br><a href="https://imgchr.com/i/mksJU0" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mksJU0.png" alt="mksJU0.png"></a><br>2.1.部署Elasticsearch<br>下载安装jre依赖<br>wget <a href="https://sec.ly.com/mirror/jre-8u161-linux-x64.rpm" target="_blank" rel="noopener">https://sec.ly.com/mirror/jre-8u161-linux-x64.rpm</a> &amp;&amp; yum -y localinstall jre-8u161-linux-x64.rpm<br>下载ES并解压<br>wget <a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.6.8.tar.gz" target="_blank" rel="noopener">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.6.8.tar.gz</a> &amp;&amp;<br>tar -zxvf elasticsearch-5.6.8.tar.gz<br>mv elasticsearch-5.6.8 /data/server/elasticsearch<br>Elasticsearch不建议以root权限运行，新建一个非root权限用户，-p后跟自行设定的密码<br>groupadd elasticsearch &amp;&amp; useradd elasticsearch -g elasticsearch -p 123<br>修改文件夹及内部文件的所属用户及组为elasticsearch：elasticsearch<br>chown -R elasticsearch:elasticsearch /data/server/elasticsearch-5.6.8<br>编辑config / elasticsearch.yml添加<br><a href="https://imgchr.com/i/mks0KJ" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mks0KJ.png" alt="mks0KJ.png"></a><br>&emsp;<br><a href="https://imgchr.com/i/mkssV1" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkssV1.png" alt="mkssV1.png"></a><br>启动<br>su - elasticsearch<br>./data/server/elasticsearch/bin/elasticsearch<br>2.kibana 、logstash需要安装同样的版本<br>这两个包官网下载的，scp到/usr/local/src下<br>解压<br>tar -zxvf kibana-5.6.8-linux-x86_64.tar.gz<br>mv kibana-5.6.8 /data/server/kibana<br>tar -zxvf logstash-5.6.8.tar.gz<br>mv logstash-5.6.8 /data/server/logstash<br>配置kibana文件<br>vi /data/server/kibana/config/kibana.yml<br>把这些前面#去掉，改内容<br><a href="https://imgchr.com/i/mkySZn" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkySZn.png" alt="mkySZn.png"></a><br>&emsp;<br><a href="https://imgchr.com/i/mkymZR" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkymZR.png" alt="mkymZR.png"></a><br>&emsp;<br><a href="https://imgchr.com/i/mkyQJK" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkyQJK.png" alt="mkyQJK.png"></a><br>修改/etc/rsyslog.conf下文件<br><a href="https://imgchr.com/i/mkyteA" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkyteA.png" alt="mkyteA.png"></a><br>&emsp;<br><a href="https://imgchr.com/i/mkyUot" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkyUot.png" alt="mkyUot.png"></a><br>在/data/server/下创建log文件<br>创建touch syslog.conf文件<br>添加以下内容<br>input  {<br>        syslog {<br>        type =&gt; “rsyslog”<br>        port =&gt; 5200<br>        }<br>}<br>output {<br>        elasticsearch {<br>                hosts =&gt; [“192.168.110.191:9200”]<br>                index =&gt; “syslog-%{+YYYY.MM}”<br>                user =&gt; “elastic”<br>                password =&gt; “changeme”<br>        }<br>        stdout {codec =&gt; rubydebug}<br>}<br>&emsp;<br>&emsp;<br><a href="https://imgchr.com/i/mkyDSS" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/08/14/mkyDSS.png" alt="mkyDSS.png"></a><br>启动kibana<br>cd /data/server/kibana/bin<br>./kibana<br>启动logstash<br>cd /data/server/logstash/bin<br>./logstash -f /data/server/log/syslog.conf<br>访问192.168.110.191:5601</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/21/centows7---ELK/" data-id="cjzc0p4dz000iygv6xb1wcd5i"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centows7搭建ELK/">centows7搭建ELK</a></li></ul>

    </footer>

  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2019/06/21/centos7 -tomcat8/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            centos7下安装tomcat8
          
        </div>
      </a>
    
    
      <a href="/2019/06/21/yl-HIDS/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">驭龙HIDS安装及测试</div>
      </a>
    
  </nav>


  

  
    
  

</article>



</section>
    </div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/technology.js"></script>

  </div>
</body>
</html>